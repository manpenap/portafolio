---
// src/components/Projects.astro
// Aquí puedes definir un arreglo de proyectos o incluso importarlos desde un archivo JSON.
const proyectos = [
  {
    nombre: "Portafolio Web con Astro",
    descripcion:
      "Portafolio desarrollado con Astro, HTML5, CSS3 y JavaScript, con diseño responsivo, modo oscuro y optimización SEO.",
    enlace: "/portafolio/portafolio-web-con-astro",
    imagen: "/assets/portafolio.png",
  },
  {
    nombre: "Tienda Virtual con React",
    descripcion:
      "Aplicación de e-commerce desarrollada con React, Vite y Tailwind, con gestión de productos, carrito de compras y diseño responsivo.",
    enlace: "/portafolio/tienda-virtual-react",
    imagen: "/assets/shopi.png",
  },

  /*
  {
    nombre: "To-Do List Avanzada",
    descripcion: "Aplicación de tareas con funcionalidades CRUD, filtros y almacenamiento local.",
    enlace: "#"
  },
  {
    nombre: "Dashboard de Datos Interactivo",
    descripcion: "Visualización dinámica de datos con gráficos interactivos.",
    enlace: "#"
  },
  {
    nombre: "API REST para Gestión de Usuarios",
    descripcion: "API creada con Node.js y Express, implementando autenticación JWT.",
    enlace: "#"
  },
  {
    nombre: "Mini Aplicación de IA: Chatbot",
    descripcion: "Integración con la API de OpenAI para responder preguntas en un entorno de chatbot.",
    enlace: "#"
  }
  */
];
---

<section id="projects" class="py-12 px-4 bg-gray-100 dark:bg-gray-900">
  <div class="container mx-auto">
    <h2
      class="text-3xl font-bold mt-12 text-gray-900 dark:text-white text-center mb-12"
    >
      Mis Proyectos
    </h2>
    <div class="grid gap-6 mb-12 md:grid-cols-2 lg:grid-cols-2">
      {
        proyectos.map((proyecto) => (
          <a
            href={proyecto.enlace}
            class="group relative block project-card overflow-hidden rounded-lg shadow-md bg-white dark:bg-gray-800 hover:shadow-lg transition-transform transform hover:-translate-y-1 opacity-0 translate-y-10"
            data-animate="fade-up"
          >
            <img
              src={proyecto.imagen}
              alt={proyecto.nombre}
              class="w-full h-48 object-cover transition-transform transform group-hover:scale-105"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center">
              <span class="hidden group-hover:flex items-center gap-2 border-2 border-white rounded-2xl p-2 text-white text-lg font-semibold transition-opacity duration-300">
                Ver Proyecto
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0zm7-1s-3-6-10-6-10 6-10 6 3 6 10 6 10-6 10-6z"
                  />
                </svg>
              </span>
            </div>
            <div class="p-5">
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                {proyecto.nombre}
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mt-2">
                {proyecto.descripcion}
              </p>
            </div>
          </a>
        ))
      }
    </div>
  </div>

  <!-- Script para animación al hacer scroll -->
  <script client:load>
    if (!window.hasRunProjectsObserver) {
      window.hasRunProjectsObserver = true;

      document.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("animate-fade-in-up");
              }
            });
          },
          { threshold: 0.1 }
        );

        const elements = document.querySelectorAll('[data-animate="fade-up"]');
        elements.forEach((el) => observer.observe(el));

        if (!("IntersectionObserver" in window)) {
          elements.forEach((el) => el.classList.add("animate-fade-in-up"));
        }
      });
    }
  </script>

  <style>
    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in-up {
      animation: fade-in-up 0.7s ease-out forwards;
    }

    .project-card {
      will-change: transform, opacity;
      cursor: pointer; /* Hace que toda la tarjeta sea clickeable */
    }

    .project-card img {
      transition: transform 0.3s ease-in-out;
    }

    .project-card:hover img {
      transform: scale(1.05);
    }
  </style>
</section>
