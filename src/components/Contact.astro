---
import { Icon } from "astro-iconify";
---

<section
  id="contact"
  class="py-16 px-4 bg-background-light-secondary dark:bg-background-dark-secondary"
>
  <div
    class="container mx-auto text-center opacity-0 translate-y-10 transition-transform duration-700 ease-out"
    data-animate="fade-up"
  >
    <h2 class="text-4xl font-bold mb-6 mt-10 text-gray-900 dark:text-white">📩 ¿Hablamos? Dos Caminos, Una Experiencia Única</h2>
    
    <div class="mb-8 max-w-4xl mx-auto">
      <p class="text-xl text-gray-700 dark:text-gray-300 mb-6 font-medium">
        Mi combinación de experiencia financiera y habilidades técnicas puede aportar valor tanto a equipos de desarrollo como a proyectos de digitalización.
      </p>
    </div>

    <!-- CTAs Diferenciados -->
    <div class="grid gap-8 lg:grid-cols-2 max-w-5xl mx-auto mb-12">
      <!-- CTA Oportunidades Laborales -->
      <div class="bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-800 dark:to-gray-700 p-6 rounded-xl">
        <div class="text-center mb-4">
          <div class="text-3xl mb-2">🏢</div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white">
            ¿Buscas talento híbrido para tu equipo?
          </h3>
        </div>
        <p class="text-gray-700 dark:text-gray-300 mb-4 text-center">
          ¿Necesitas un desarrollador que entienda el negocio desde adentro? ¿Un analista que también programe? ¿Alguien que traduzca necesidades comerciales en soluciones técnicas?
        </p>
        <div class="text-center">
          <a href="mailto:manuelpenapinones@gmail.com?subject=Oportunidad Laboral - Perfil Híbrido" 
             class="inline-block bg-blue-600 text-white py-3 px-6 rounded-lg shadow-lg hover:bg-blue-700 transition-all transform hover:scale-105 font-semibold">
            📧 Contactar para Oportunidades Laborales
          </a>
        </div>
      </div>

      <!-- CTA Consultoría -->
      <div class="bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-800 dark:to-gray-700 p-6 rounded-xl">
        <div class="text-center mb-4">
          <div class="text-3xl mb-2">🚀</div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white">
            ¿Necesitas consultoría en digitalización?
          </h3>
        </div>
        <p class="text-gray-700 dark:text-gray-300 mb-4 text-center">
          ¿Quieres automatizar procesos sin perder el control? ¿Crear sistemas que realmente mejoren tu eficiencia comercial? ¿Un perfil técnico con visión de negocio para tu proyecto?
        </p>
        <div class="text-center">
          <a href="mailto:manuelpenapinones@gmail.com?subject=Consultoría - Transformación Digital" 
             class="inline-block bg-green-600 text-white py-3 px-6 rounded-lg shadow-lg hover:bg-green-700 transition-all transform hover:scale-105 font-semibold">
            🤝 Contactar para Consultoría
          </a>
        </div>
      </div>
    </div>

    <!-- Mensaje de Cierre -->
    <div class="mb-8 max-w-3xl mx-auto">
      <div class="bg-gradient-to-r from-pink-500 to-purple-600 text-white p-6 rounded-xl text-center">
        <p class="text-xl font-semibold">
          Sea cual sea el camino, podemos construir algo simple, funcional y efectivo que realmente impacte tu negocio.
        </p>
      </div>
    </div>

    <!-- Formulario de contacto alternativo -->
    <div class="max-w-2xl mx-auto">
      <h3 class="text-2xl font-bold text-gray-900 dark:text-white text-center mb-6">
        O escríbeme directamente
      </h3>
    

    <form
      id="contact-form"
      action="https://api.web3forms.com/submit"
      method="POST"
      class="max-w-lg mx-auto text-text-light"
    >
      <input type="hidden" id="access_key" name="access_key" />

      <div class="mb-4">
        <input
          type="text"
          name="name"
          placeholder="Tu Nombre"
          class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
          required
        />
      </div>
      <div class="mb-4">
        <input
          type="email"
          name="email"
          placeholder="Tu Email"
          class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
          required
        />
      </div>
      <div class="mb-4">
        <textarea
          name="message"
          rows="5"
          placeholder="Tu Mensaje"
          class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
          required></textarea>
      </div>
      <button
        type="submit"
        class="w-full bg-blue-500 text-white p-4 rounded-lg hover:bg-blue-600 transition-colors"
      >
        Enviar Mensaje
      </button>
      <p id="form-message" class="mt-4 text-lg"></p>
    </form>
  </div>

  <!-- Script para manejar el mensaje de respuesta -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const accessKeyInput = document.getElementById("access_key");
      if (accessKeyInput) {
        accessKeyInput.value = import.meta.env.PUBLIC_WEB3FORMS_ACCESS_KEY;
      }

      const form = document.getElementById("contact-form");
      const messageElement = document.getElementById("form-message");

      if (!form || !messageElement) return;

      form.addEventListener("submit", async function (event) {
        event.preventDefault();

        const formData = new FormData(form);

        try {
          const response = await fetch(form.action, {
            method: "POST",
            body: formData,
          });

          const result = await response.json();

          if (result.success) {
            messageElement.textContent =
              "¡Tu mensaje ha sido enviado con éxito!";
            messageElement.style.color = "green";
            form.reset();
          } else {
            messageElement.textContent =
              "Hubo un error al enviar el mensaje. Inténtalo de nuevo.";
            messageElement.style.color = "red";
          }
        } catch (error) {
          messageElement.textContent =
            "Ocurrió un error inesperado. Inténtalo más tarde.";
          messageElement.style.color = "red";
        }
      });
    });
  </script>

  <style>
    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in-up {
      animation: fade-in-up 0.7s ease-out forwards;
    }
  </style>
</section>
